<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Portfolio</title>
    <link rel="stylesheet" href="/static/css/bootstrap.css">
    <!-- <link rel="stylesheet" href="css/bootstrap.css"> -->


</head>

<body onload="setUp()">

    <h2 style="text-align:center; margin-top:5%">Portfolio</h2>
    <div class="main"></div>
    <table class="table table-responsive table-hover" style="margin-top:5%">
        <thead>
            <tr>
                <!--table headers -->
                <th scope="col" style="font-size:150%; color:lightblue;"></th>
                <th scope="col" style="font-size:150%; color:lightblue;">Symbol</th>
                <th scope="col" style="font-size:150%; color:lightblue;">Price</th>
                <th scope="col" style="font-size:150%; color:lightblue;">Share</th>
                <th scope="col" style="font-size:150%; color:lightblue;">Value</th>
                <th scope="col" style="font-size:150%; color:lightblue;">Amount</th>
                <th scope="col" style="font-size:150%; color:transparent;">asdaasdf</th>

            </tr>
        </thead>
        <tbody>

        </tbody>


    </table>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script>

        function setUp() {
            $.ajax({
                type: 'POST',
                url: '/getOwnedStock',
                data: {
                    username: window.location.pathname.split("/")[2],
                },
                success: function (data) {
                    let result = data.result
                    var stocks = result.stocks
                    var totalValue = result.totalValue

                    for (let i = 0; i < stocks.length; i++) {
                        symbol = stocks[i].symbol
                        price = stocks[i].price
                        share = stocks[i].share
                        value = stocks[i].value

                        let a = document.createElement('tr');
                        let x = document.createElement('th');
                        let b = document.createElement('td');
                        let c = document.createElement('td');
                        let d = document.createElement('td');
                        let e = document.createElement('td');
                        let inputText = document.createElement('input');
                        let sellBut = document.createElement('button');
                        x.scope = "row";
                        x.textContent = i + 1
                        b.textContent = symbol;
                        c.textContent = price;
                        d.textContent = share;
                        e.textContent = value;
                        inputText.type = "number";
                        inputText.className = "form-group ";
                        inputText.style = "width:40%;";
                        sellBut.class = "btn btn-outline-primary";
                        sellBut.style = "width:30%; margin-left:10%";
                        sellBut.textContent = "Sell";

                        a.appendChild(x);
                        a.appendChild(b);
                        a.appendChild(c);
                        a.appendChild(d);
                        a.appendChild(e);
                        a.appendChild(inputText);
                        a.appendChild(sellBut);

                        document.querySelector('.table').appendChild(a);
                    }
                }
            })
        }


        // var result = { 'stocks': [{ 'symbol': 'AAPL', 'price': 131.96, 'share': 4, 'value': 527.84 }, { 'symbol': 'GOOG', 'price': 1835.74, 'share': 3, 'value': 5507.22 }], 'totalValue': 6035.06 }

        // var stocks = result.stocks
        // var totalValue = result.totalValue

        // for (let i = 0; i < stocks.length; i++) {
        //     symbol = stocks[i].symbol
        //     price = stocks[i].price
        //     share = stocks[i].share
        //     value = stocks[i].value

        //     let a = document.createElement('tr');
        //     let x = document.createElement('th');
        //     let b = document.createElement('td');
        //     let c = document.createElement('td');
        //     let d = document.createElement('td');
        //     let e = document.createElement('td');
        //     let inputText = document.createElement('input');
        //     let sellBut = document.createElement('button');
        //     x.scope = "row";
        //     x.textContent = i + 1
        //     b.textContent = symbol;
        //     c.textContent = price;
        //     d.textContent = share;
        //     e.textContent = value;
        //     inputText.type = "number";
        //     inputText.className = "form-group ";
        //     inputText.style = "width:40%;";
        //     sellBut.class = "btn btn-outline-primary";
        //     sellBut.style = "width:30%; margin-left:10%";
        //     sellBut.textContent = "Sell";

        //     a.appendChild(x);
        //     a.appendChild(b);
        //     a.appendChild(c);
        //     a.appendChild(d);
        //     a.appendChild(e);
        //     a.appendChild(inputText);
        //     a.appendChild(sellBut);

        //     document.querySelector('.table').appendChild(a);
        // };


    </script>

    <script src="js/bootstrap.js"></script>

</body>

</html>